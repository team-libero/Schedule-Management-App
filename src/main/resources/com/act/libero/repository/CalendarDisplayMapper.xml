<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.act.libero.repository.CalendarDisplayMapper">

    <!-- 個人スケジュール検索 -->
    <select id="selectTargetSchedule" resultType="com.act.libero.dto.ScheduleInfoList">
    SELECT
        *
    FROM
        libero.schedule 
    WHERE
        user_id = #{userId}
        AND from_date_time LIKE #{targetMonthStr}
        AND users_group_id is null
        AND delete_flag = 0
    ORDER BY
        from_date_time
        , schedule_id
    </select>

    <!-- グループスケジュール検索 -->
    <select id="selectTargetScheduleGrp" resultType="com.act.libero.dto.ScheduleInfoList">
    SELECT
        *
    FROM
        libero.schedule 
    WHERE
        users_group_id = #{groupId}
        AND from_date_time LIKE #{targetMonthStr}
        AND delete_flag = 0
    ORDER BY
        from_date_time
        , schedule_id
    </select>

</mapper>